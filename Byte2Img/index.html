<!DOCTYPE html>
    <head>
        <title>Byte2Img</title>
        
    </head>
    <body>
        <script src="p5.min.js"></script>
        <script>

            var file;

            function preload()
            {
                file = loadBytes("file.dat");
            }

            function setup()
            {
                createCanvas(800, 600);
                background(255);

                image(convert(file.bytes), 0, 0);
            }

            function draw()
            {

            }

            function convert(buffer)
            {
                var _buffer = [].slice.call(buffer);

                var _res = Math.ceil(Math.sqrt(_buffer.length));
                var _cell = [];

                _graphic = createGraphics(_res, _res);
                _graphic.background(0);

                switch (_buffer.length % 3)
                {
                    case 1:
                        _buffer.push(0);
                    case 2:
                        _buffer.push(0);
                    break;
                }


                var value;
                var num;
                for (i = 0; i < _buffer.length; i += 3)
                {   
                    value = "";
                    num = "";

                    for (j = 0; j < 3; j++)
                    {
                        num = _buffer[i + j].toString(16);

                        if (num.length === 1)
                            num = "0" + num;
                    
                        value += num;
                    }

                    _cell.push("#" + value);
                }

                while (_cell.length < _res * _res)
                {
                    _cell.push("#000000");
                }

                for (y = 0; y < _res; y++)
                {
                    for (x = 0; x < _res; x++)
                    {  
                        this._graphic.set(x, y, color(_cell[y * _res + x]));
                        //  console.log(_cell[y * _res + x]);
                    }
                }

                _graphic.updatePixels();
                save(_graphic);
            }

        </script>
    </body>
</html>